@page
@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor HttpContextAccessor
@model ShoppingAssignment_SE150568.Pages.ProductPage.DetailsModel

@{
    ViewData["Title"] = "Details";
}

<h1>Details</h1>

<div>
    <h4>
        @Html.DisplayFor(model => model.Product.ProductName)
    </h4>
    <hr />
    <div class="row">
        <div class="col-6">
            <img style="width:500px" src="~/Images/@Html.DisplayFor(model => model.Product.ProductImage)" />
        </div>
        <dl class="col-6">
            <dt class="">
                @Html.DisplayNameFor(model => model.Product.ProductName)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Product.ProductName)
            </dd>
            <dt class="">
                @Html.DisplayNameFor(model => model.Product.Category)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Product.Category.CategoryName)
            </dd>
            <dt class="">
                @Html.DisplayNameFor(model => model.Product.Supplier)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Product.Supplier.CompanyName)
            </dd>
            <dt class="">
                @*@Html.DisplayNameFor(model => model.Product.QuantityPerUnit)*@
                Unit in stock
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Product.QuantityPerUnit)
            </dd>
            <dt class="">
                @Html.DisplayNameFor(model => model.Product.UnitPrice)
            </dt>
            <dd class="col-sm-10 text-success">
                @Html.DisplayFor(model => model.Product.UnitPrice)
            </dd>
            @* <dt class="">
            @Html.DisplayNameFor(model => model.Product.ProductImage)
            </dt>

            <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Product.ProductImage)
            </dd>*@
            <dt class="">
                @Html.DisplayNameFor(model => model.Product.ProductStatus)
            </dt>
            @*@Html.DisplayFor(model => model.Product.ProductStatus)*@
            @{
                if (Model.Product.ProductStatus == 0)
                {
                    <dd class="col-sm-10">
                        Inactive
                    </dd>

                }
                else
                {
                    <dd class="col-sm-10">
                        Active
                    </dd>
                }
            }
            @if (HttpContextAccessor.HttpContext.Session.GetString("ROLE") != "Admin")
            {
                <form method="post" asp-page-handler="AddToCart">
                    <input type="hidden" name="productId" value="@Model.Product.ProductId" />
                    <div class="add-button text-center col-sm-10">
                        <button type="submit" class="btn btn-primary btn-outline-primary">Add To Cart</button>
                    </div>
                </form>

            }

        </dl>
    </div>
</div>
<div>
    <a asp-page="./Edit" asp-route-id="@Model.Product.ProductId">Edit</a> |
    <a asp-page="./Index">Back to List</a>
</div>
<script type="text/javascript">
    window.onload = function() {
        if ('@TempData["Message"]' != "") {
            alert('@TempData["Message"]');
        }
    };
</script>